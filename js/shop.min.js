!function(){"use strict";var e=Object.defineProperty;const t=class e{static get isAndroid(){return Boolean(e.userAgent.match(/Android/i))}static get isBlackBerry(){return Boolean(e.userAgent.match(/BlackBerry/i))}static get isAppleOS(){return Boolean(e.userAgent.match(/iPhone|iPad|iPod/i))}static get isOpera(){return Boolean(e.userAgent.match(/Opera Mini/i))}static get isWindows(){return Boolean(e.userAgent.match(/IEMobile/i))}static get isAny(){return e.isAndroid||e.isBlackBerry||e.isAppleOS||e.isOpera||e.isWindows}};((t,s,n)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n})(t,"userAgent"+"",navigator.userAgent);var s=t,n=Object.defineProperty,a=(e,t,s)=>(((e,t,s)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s);const o=class e{static checkWebpSupport(){(t=>{const s=new Image;s.onload=s.onerror=()=>(t=>{const s=t?"webp":"no-webp";e.html.classList.add(s),console.log(t?"webp поддерживается":"webp не поддерживается")})(2===s.height),s.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})()}static addTouchClass(){s.isAny&&e.html.classList.add("touch")}static addLoadedClass(){window.addEventListener("load",(()=>{setTimeout((()=>{e.html.classList.add("loaded")}),0)}))}static get getHash(){var e;return null==(e=location.hash)?void 0:e.replace("#","")}static setHash(e){e=e?`#${e}`:location.href.split("#")[0],history.pushState("","",e)}static headerFixed(){const t=new IntersectionObserver((([t])=>{e.html.classList.toggle("header-is-sticky",!t.isIntersecting)}));e.firstScreen&&t.observe(e.firstScreen)}};a(o,"html",document.documentElement),a(o,"header",document.querySelector(".header")),a(o,"firstScreen",document.querySelector("[data-observ]"));var r=o,c=class{constructor(){this.html=document.documentElement,this.body=document.body,this.pageWrapper=document.querySelector(".page"),this.lockPaddingElements=document.querySelectorAll("[data-lp]")}toggleBodyLock(e){const t=window.innerWidth-this.pageWrapper.offsetWidth;this.lockPaddingElements&&this.lockPaddingElements.forEach((s=>{s.style.paddingRight=e?`${t}px`:"0px"})),this.body.style.paddingRight=e?`${t}px`:"0px",this.html.classList.toggle("lock",e)}};const i=document.querySelector(".header");console.log(window.location.pathname),i.querySelectorAll(".menu__item").forEach((e=>{e.querySelector("a").getAttribute("href")===window.location.pathname&&e.classList.add("menu__item-active")})),i.addEventListener("click",(e=>{const t=e.target.closest(".search__button"),s=e.target.closest("#header-basket"),n=document.getElementById("basket");if(t){const e=i.querySelector("#search-input"),t=i.querySelector("#search-submit");search.classList.toggle("search-active"),e.classList.toggle("search__input-active"),t.classList.toggle("search__submit-active")}s&&(n.classList.add("basket-fade-active"),document.body.style.overflow="hidden")}));let l=()=>{const e=basket.querySelectorAll(".basket-item");let t=0;e.forEach((e=>{const s=e.querySelector("[data-counter]"),n=e.querySelector(".basket-item__price"),a=parseInt(s.textContent)*parseInt(n.textContent),o=document.querySelector(".discount__value"),r=document.querySelector(".total-price__value"),c=document.getElementById("basket-shipping-price");let i=0;c&&document.querySelector(".radio-input:checked")&&(i=parseInt(c.textContent)),r.innerText=(t+=a)-parseInt(o.textContent)+i+"$"}))};const d=()=>{const e=basket.querySelector(".basket__list"),t=basket.querySelector(".basket__empty"),s=basket.querySelector(".basket__info"),n=document.querySelector(".header-basket__counter"),a=document.querySelector(".gift");e.children.length>0?(t.classList.add("none"),s.classList.remove("none"),n&&(n.classList.remove("none"),n.innerText=e.children.length)):(t.classList.remove("none"),s.classList.add("none"),document.querySelector(".total-price__value").innerText="0$",n&&n.classList.add("none"),a&&a.classList.add("none"))};let u,p,m,g;document.querySelectorAll(".form-input"),document.getElementById("basket").addEventListener("click",(e=>{"plus"!==e.target.dataset.action&&"minus"!==e.target.dataset.action||(p=e.target.closest(".basket-item__actions"),u=p.querySelector("[data-counter]"),m=p.querySelector('[data-action="minus"]')),"plus"===e.target.dataset.action&&(m.innerText="-",u.innerText=++u.innerText,l(),d()),e.target.closest('[data-action="minus"]')&&(parseInt(u.innerText)>1?(u.innerText=--u.innerText,l(),1===parseInt(u.innerText)?m.innerHTML='\n            <svg class="svg-trash-alt-dims">\n              <use xlink:href="images/sprite.svg#trash-alt"></use>\n            </svg>':m.innerHTML="-"):(m.closest(".basket-item").remove(),l(),d())),e.target.closest(".basket__close-btn")&&(document.getElementById("basket").classList.remove("basket-fade-active"),document.body.style.overflow="visible"),e.target.closest(".basket__btn")&&(()=>{const e=document.getElementById("basket-list").querySelectorAll(".basket__item"),t=Array.from(e).map((e=>e.outerHTML));localStorage.setItem("basketStorageElems",JSON.stringify(t));const s=document.getElementById("basket-total-price").innerText;localStorage.setItem("basketPrice",s)})()}));const _=(e,t)=>{const s=Object.values(t).toSorted(((t,s)=>t[e]-s[e]));g={};for(let e=0;e<s.length;e++){const t=s[e];g[t.name]=t}},h=(e,t)=>{const s=Object.values(t).toSorted(((t,s)=>s[e]-t[e]));g={};for(let e=0;e<s.length;e++){const t=s[e];g[t.name]=t}};function b(e,t){for(let s in e){const n=`\n        <div class="slider__item swiper-slide">\n                          <div  class="product-cart" data-cart data-category="${e[s].category}" data-name = "${e[s].name}">\n                              <div class="product-cart__wrapper">\n                                  <div class="product-cart__mark product-cart__mark-hit none"> \n                                      <span>hit</span>\n                                  </div>\n                                  <div class="product-cart__mark product-cart__mark-counter">\n                                      <span>${e[s].quantity.rest}/${e[s].quantity.total}</span>\n                                  </div>\n                                  <img class="product-cart__img" src="${e[s].img}" alt="${e[s].name}">\n                                  <div class="product-cart__details">\n                                      <div class="product-cart__info">\n                                          <h3 class="product-cart__title">${e[s].name}</h3>\n                                          <span class="product-cart__price">${e[s].price}$</span>\n                                          <div class="product-cart__color-size" >\n                                              <span class="product-cart__size">\n                                              ${e[s].size[0]}\n                                              </span>\n                                              <span class="product-cart__color  color__${e[s].color[0]}">\n                                              </span>\n                                              <button type="button" data-cart_action="edit" class="product-cart__edit">\n                                                  <svg class="svg-edit-dims">\n                                                      <use xlink:href="images/sprite.svg#edit"></use>\n                                                  </svg>\n                                              </button>\n                                          </div>\n                                      </div>\n                                      <button type="button" data-cart_action="add" class="product-cart__add">\n                                          <svg class="svg-shopping-bag-dims">\n                                              <use xlink:href="images/sprite.svg#shopping-bag"></use>\n                                          </svg>\n                                          <img class="product-cart__add-decoration" src="images/btn-add__decoration.png" alt="">\n                                      </button>\n                                  </div>\n                              </div>\n                              <div class="product-cart__menu cart-menu">\n                                  <div class="cart-menu__wrapper">\n                                      <div class="cart-menu__info">\n                                          <span class="cart-menu__title">\n                                          ${e[s].name}\n                                          </span>\n                                          <span class="cart-menu__price">\n                                          ${e[s].price}$\n                                          </span>\n                                      </div>\n                                      <div class="cart-menu__size size">\n                                          <p class="size-title">select size</p>\n                                          <div class="size__wrapper">\n                                              <input class="size__input" type="radio" name="size" value="s" id="${e[s].name}size-s">\n                                              <label for="${e[s].name}size-s">\n                                                  S\n                                              </label>\n                                              <input class="size__input" type="radio" name="size" value="m" id="${e[s].name}size-m">\n                                              <label for="${e[s].name}size-m">\n                                                  M\n                                              </label>\n                                              <input class="size__input" type="radio" name="size" value="l" id="${e[s].name}size-l">\n                                              <label for="${e[s].name}size-l">\n                                                  L\n                                              </label>\n                                              <input class="size__input" type="radio" name="size" value="xl" id="${e[s].name}size-xl" >\n                                              <label for="${e[s].name}size-xl">\n                                                  XL\n                                              </label>\n                                          </div>\n                                      </div>\n                                      <div class="cart-menu__color color">\n                                          <p class="color__title">select color</p>\n                                          <div class="color__wrapper">\n                                              <input class="color__input" type="radio" name="color" value="blue" id="${e[s].name}color-blue" >\n                                              <label class="color__blue" for="${e[s].name}color-blue">\n                                              </label>\n                                              <input class="color__input" type="radio" name="color" value="red" id="${e[s].name}olor-red">\n                                              <label class="color__red" for="${e[s].name}color-red">\n                                              </label>\n                                              <input class="color__input" type="radio" name="color" value="green" id="${e[s].name}color-green">\n                                              <label class="color__green" for="${e[s].name}color-green">\n                                              </label>\n                                              <input class="color__input" type="radio" name="color" value="white" id="${e[s].name}color-white">\n                                              <label class="color__white" for="${e[s].name}color-white">\n                                              </label>\n                                              <input class="color__input" type="radio" name="color" value="black" id="${e[s].name}color-black">\n                                              <label class="color__black" for="${e[s].name}color-black">\n                                              </label>\n                                          </div>\n                                      </div>\n                                      <button type="button" class="cart-menu__button" data-cart_action="add">add to cart</button>\n                                  </div>\n                              </div>\n                          </div>\n                      </div>\n        `;t.insertAdjacentHTML("beforeend",n)}v("color",e),v("size",e)}const y={cap:{category:"cap",img:"images/card_cap.png",name:"pepka cap",price:24,addedDate:new Date("2023-03-01"),color:["black"],size:["l"],likes:8,quantity:{total:55,rest:12}},cap2:{category:"cap",img:"images/pepe-cap2.png",name:"pepka sad",price:54,addedDate:new Date("2024-03-09"),color:["black","red","green"],size:["l","s","m"],likes:33,quantity:{total:110,rest:101}},tshirt:{category:"t-shirt",img:"images/t-shirt.png",name:"pepe T-shirt",price:29,addedDate:new Date("2023-06-02"),color:["white","red"],size:["m","l"],likes:44,quantity:{total:100,rest:66}},tshirt2:{category:"t-shirt",img:"images/pepe-tshirt22.png",name:"pepe T-shirt2",price:23,addedDate:new Date("2024-04-02"),color:["white","black","green","red"],size:["xl","m","s"],likes:94,quantity:{total:100,rest:91}},boots:{category:"boots",img:"images/boots.png",name:"pepka boots",price:73,addedDate:new Date("2023-05-14"),color:["green"],size:["xl"],likes:154,quantity:{total:20,rest:1}},pants:{category:"pants",img:"images/pants1.png",name:"pepka pants",price:37,addedDate:new Date("2023-04-04"),color:["green"],size:["m","s"],likes:66,quantity:{total:80,rest:35}},socks:{category:"socks",img:"images/socks.png",name:"pepka socks",price:8,addedDate:new Date("2023-04-28"),color:["white","red","black","blue"],size:["s","m","l","xl"],likes:88,quantity:{total:190,rest:86}}},v=(e,t)=>{for(let s in t)document.querySelector(`[data-name='${t[s].name}']`).querySelectorAll(`.${e}__input`).forEach((n=>{n.setAttribute("disabled",""),n.nextElementSibling.classList.add(`${e}__disabled`),t[s][e].forEach((t=>{if(n.value===t)return n.removeAttribute("disabled"),void n.nextElementSibling.classList.remove(`${e}__disabled`)}))}))};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("swiper-wrapper_featured"),t=document.getElementById("swiper-wrapper_news"),s=document.getElementById("shop-list");e&&t?(b(y,e),h("addedDate",y),b(g,t)):b(y,s)})());const k=(e,t)=>{document.querySelectorAll(e).forEach((function(e,s){e.querySelectorAll('input[type="radio"]').forEach((function(e){const n=`${t}-${e.value}-${s}`;e.id=n,e.nextElementSibling.setAttribute("for",n)}))}))};k(".color__wrapper","color"),k(".size__wrapper","size");const f=e=>{const t=e.querySelector(".product-cart__color").classList;let s="";t.forEach((e=>{e.startsWith("color__")&&(s=e)}));const n=e.getAttribute("data-category"),a=e.querySelector("img").getAttribute("src"),o=e.querySelector(".product-cart__title").innerText,r=e.querySelector(".product-cart__price").innerText,c=e.querySelector(".product-cart__size").textContent,i=s,u=document.querySelector(".basket__list");let p=`\n     <li class="basket__item basket-item" data-category='${n}'>\n           \n     <img class="basket-item__img" src="${a}" alt="">\n     <div class="basket-item__info">\n       <h6 class="basket-item__title">${o}</h6>\n       <span class="basket-item__price">${r}</span>\n     </div>\n     <div class="basket-item__data">\n       <span class="basket-item__size">${c}</span>\n       <span class="basket-item__color ${i}">\n       </span>\n       <div class="basket-item__actions">\n         <div class="basket-item__control" data-action="minus">\n         <svg class="svg-trash-alt-dims">\n         <use xlink:href="images/sprite.svg#trash-alt"></use>\n       </svg>\n         </div>\n             <div class="basket-item__current" data-counter>1</div>\n             <div class="basket-item__control" data-action="plus">+</div>\n       </div>\n     </div>\n   </li>\n     `;const m=document.createElement("div");m.innerHTML=`\n      <div class="added">\n        <img class="added__img" src="${a}" alt="added">\n        <span class="added__title">\n          <svg class="svg-shopping-bag-dims">\n            <use xlink:href="images/sprite.svg#shopping-bag"></use>\n          </svg>\n          Added to cart\n        </span>\n        <div class="added__info">\n          <span class="added__name">${o}</span>\n          <span class="added__size">${c}</span>\n          <span class="added__color ${i}"></span>\n        </div>\n      </div>\n      `,document.body.appendChild(m),setTimeout((()=>{document.body.removeChild(m)}),4e3),u.insertAdjacentHTML("beforeend",p),d(),l()};document.body.addEventListener("click",(e=>{const t=e.target,s=t.closest(".product-cart");if(t.closest('[data-cart_action="edit"]')&&s.querySelector(".cart-menu").classList.add("cart-menu-open"),t.closest('[data-cart_action="add"]')){const e=s.querySelector(".product-cart__add");e.innerHTML='\n          <svg class="svg-shopping-bag_enabled-dims">\n          <use xlink:href="images/sprite.svg#shopping-bag_enabled"></use>\n      </svg>\n          ',e.setAttribute("disabled",""),t.closest(".cart-menu")&&s.querySelector(".cart-menu").classList.remove("cart-menu-open");const n=s.querySelector(".product-cart__mark-counter"),a=s.querySelector(".product-cart__mark-hit");n.classList.add("none"),a.classList.remove("none"),(e=>{let t=e.querySelector(".size__input:checked"),s=e.querySelector(".color__input:checked");const n=()=>{const t=e.querySelector(".product-cart__color"),n=s.nextElementSibling.classList[0];t.classList.remove("color__blue","color__red","color__green","color__white"),t.classList.add(n)},a=()=>{e.querySelector(".product-cart__size").textContent=t.nextElementSibling.textContent};s&&t?(n(),a()):s?n():t&&a()})(s),(e=>{const t=document.querySelector("#basket-list"),s=e.querySelector(".product-cart__color").classList;let n="";s.forEach((e=>{e.startsWith("color__")&&(n=e)}));const a=e.querySelector(".product-cart__size").textContent,o=e.getAttribute("data-category"),r=t.querySelectorAll(".basket-item");let c=!1;0!==t.children.length?(r.forEach((e=>{const t=e.querySelector(".basket-item__color").classList[1],s=e.querySelector(".basket-item__size").textContent,r=e.getAttribute("data-category");if(s===a&&r===o&&t===n){const t=e.querySelector("[data-counter]");let s=Number(t.textContent);return s++,t.textContent=s,l(),void(c=!0)}})),c||f(e)):f(e)})(s)}}));const S=document.getElementById("filter-list-wrapper"),L=document.getElementById("shop-list"),q=[];let w;const E=()=>{(()=>{w={};for(let e in y){const t=y[e],s=t.color,n=t.size,a=[t.category];s.forEach((e=>{a.push(e)})),n.forEach((e=>{a.push(e)})),q.every((e=>a.includes(e)))&&(w[e]=y[e])}})(),S.innerHTML="",q.forEach((e=>{const t=`\n      <li class="filter-list__item" id="filter-list-size">\n                    ${e}\n                    <button class="filter-list__item-delete">\n                        <svg class="svg-close-dims">\n                            <use xlink:href="images/sprite.svg#close"></use>\n                        </svg>\n                    </button>\n                </li>\n      `;S.insertAdjacentHTML("beforeend",t),S.querySelectorAll(".filter-list__item ").forEach((e=>{e.addEventListener("click",(e=>{if(e.target.closest(".filter-list__item-delete")){const t=e.target.closest(".filter-list__item"),s=t.innerText.toLowerCase();document.getElementById("filter-box").querySelector(`input[value = ${s}]:checked`).checked=!1;let n=q.indexOf(s);-1!==n&&q.splice(n,1),E(),t.remove()}}))}))})),L.innerHTML="",b(w,L),v("color",w),v("size",w)},A=document.getElementById("search-input"),$=document.getElementById("shop-search-input");let x,B;function z(e){B=e}function I(){return B}document.getElementById("search-submit").addEventListener("click",(e=>{const t=e.target.closest("#search").querySelector(".search__input").value,s=new URLSearchParams(window.location.search);s.set("search",t);const n="/shop.html?"+s.toString();window.location.href=n})),document.addEventListener("DOMContentLoaded",(()=>{if("/shop.html"===window.location.pathname){const e=new URLSearchParams(window.location.search);if(e.get("search")){x=e.get("search").split(" "),B={};for(let e in y){const t=y[e],s=t.name,n=t.color,a=[t.category];s.split(" ").forEach((e=>{a.push(e)})),n.forEach((e=>{a.push(e)})),x.every((e=>a.includes(e)))&&(B[e]=y[e])}A.value=e.get("search"),$.value=e.get("search"),L.innerHTML="",b(B,L)}}}));const T=document.getElementById("shop-nav"),C=document.getElementById("shop-list"),M=document.getElementById("filter-popular"),O=document.getElementById("filter-price");let P=!0;T.addEventListener("click",(e=>{const t=e.target;if("filter-price"===t.id){t.classList.add("shop-nav__item--active");const e=t.querySelector(".svg-arrow-down-dims");e.classList.remove("none"),M.classList.remove("shop-nav__item--active"),M.querySelector(".svg-arrow-down-dims").classList.add("none"),e.style.transform=P?"rotate(180deg)":"rotate(0deg)",P?(_("price",B||w||y),C.innerHTML="",b(g,C),P=!1):(h("price",B||w||y),C.innerHTML="",b(g,C),P=!0)}if("filter-popular"===t.id){t.classList.add("shop-nav__item--active");const e=t.querySelector(".svg-arrow-down-dims");e.classList.remove("none"),O.classList.remove("shop-nav__item--active"),O.querySelector(".svg-arrow-down-dims").classList.add("none"),e.style.transform=P?"rotate(180deg)":"rotate(0deg)",P?(_("likes",B||w||y),C.innerHTML="",b(g,C),P=!1):(h("likes",B||w||y),C.innerHTML="",b(g,C),P=!0)}}));const H=document.querySelectorAll(".shop-nav__item"),D=document.getElementById("apply-btn"),W=document.querySelectorAll("[data-filter-clear]"),j=document.querySelectorAll(".search__input"),R=document.getElementById("filter-box"),U=()=>{w=null,z(null),I(),L.innerHTML="",S.innerHTML="",b(y,L),R.querySelectorAll('input[type="checkbox"]:checked').forEach((e=>{e.checked=!1})),H.forEach((e=>{e.classList.remove("shop-nav__item--active"),e.querySelector("svg").classList.add("none")})),j.forEach((e=>{e.value=""}))};D.addEventListener("click",(()=>{z(null),I();const e=R.querySelectorAll('input[type="checkbox"]:checked');q.length=0,e.forEach((e=>{q.push(e.value)})),E()})),W.forEach((e=>{e.addEventListener("click",U)})),document.querySelector(".categories"),console.log("categories.js");const N=window.location.pathname.split("/").pop();document.addEventListener("DOMContentLoaded",(()=>{if("index.html"==N&&document.querySelectorAll(".categories__cart").forEach((e=>{e.querySelector("a").setAttribute("href",`shop.html?category=${e.dataset.category}`)})),"shop.html"==N){const e=new URLSearchParams(window.location.search).get("category");q.push(e),document.querySelector(`input[value = ${e}]`).setAttribute("checked",""),E()}})),r.checkWebpSupport(),r.addTouchClass(),r.addLoadedClass(),r.headerFixed(),new class extends c{constructor(e={}){super(),this.options=Object.assign({isOpenClass:"is-open",buttonCloseName:"button-close"},e),this.init(),this.addEventListeners()}init(){this.popups.forEach((e=>{e.setAttribute("aria-hidden","true")}))}addEventListeners(){document.addEventListener("click",this.togglePopup.bind(this))}togglePopup({target:e}){if(e.closest("[data-type]")){const t=this.getPopupBySelector(e.dataset.type);this.isOpenElements.forEach((e=>this.closePopup(e))),this.openPopup(t),this.toggleBodyLock(!0)}(e.hasAttribute("data-close-overlay")||e.closest(`.${this.options.buttonCloseName}`))&&(this.closePopup(e.closest("[data-popup]")),this.toggleBodyLock(!1))}getPopupBySelector(e){return document.querySelector(`[data-popup="${e}"]`)}get popups(){return document.querySelectorAll("[data-popup]")}get isOpenElements(){return document.querySelectorAll(`.${this.options.isOpenClass}`)}openPopup(e){e.classList.add(this.options.isOpenClass),e.setAttribute("aria-hidden","false")}closePopup(e){e.classList.remove(this.options.isOpenClass),e.setAttribute("aria-hidden","true")}},(new class extends c{constructor(){super(),this.burgerButton=document.querySelector(".icon-menu")}init(){this.burgerButton&&document.addEventListener("click",(({target:e})=>{e.closest(".icon-menu")&&(this.html.classList.toggle("menu-open"),this.toggleBodyLock(this.isMenuOpen))}))}menuOpen(){this.toggleBodyLock(!0),this.html.classList.add("menu-open")}menuClose(){this.toggleBodyLock(!1),this.html.classList.remove("menu-open")}get isMenuOpen(){return this.html.classList.contains("menu-open")}}).init()}();