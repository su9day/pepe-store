!function(){"use strict";var e=Object.defineProperty;const t=class e{static get isAndroid(){return Boolean(e.userAgent.match(/Android/i))}static get isBlackBerry(){return Boolean(e.userAgent.match(/BlackBerry/i))}static get isAppleOS(){return Boolean(e.userAgent.match(/iPhone|iPad|iPod/i))}static get isOpera(){return Boolean(e.userAgent.match(/Opera Mini/i))}static get isWindows(){return Boolean(e.userAgent.match(/IEMobile/i))}static get isAny(){return e.isAndroid||e.isBlackBerry||e.isAppleOS||e.isOpera||e.isWindows}};((t,n,a)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a})(t,"userAgent"+"",navigator.userAgent);var n=t,a=Object.defineProperty,s=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const r=class e{static checkWebpSupport(){(t=>{const n=new Image;n.onload=n.onerror=()=>(t=>{const n=t?"webp":"no-webp";e.html.classList.add(n),console.log(t?"webp поддерживается":"webp не поддерживается")})(2===n.height),n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})()}static addTouchClass(){n.isAny&&e.html.classList.add("touch")}static addLoadedClass(){window.addEventListener("load",(()=>{setTimeout((()=>{e.html.classList.add("loaded")}),0)}))}static get getHash(){var e;return null==(e=location.hash)?void 0:e.replace("#","")}static setHash(e){e=e?`#${e}`:location.href.split("#")[0],history.pushState("","",e)}static headerFixed(){const t=new IntersectionObserver((([t])=>{e.html.classList.toggle("header-is-sticky",!t.isIntersecting)}));e.firstScreen&&t.observe(e.firstScreen)}};s(r,"html",document.documentElement),s(r,"header",document.querySelector(".header")),s(r,"firstScreen",document.querySelector("[data-observ]"));var o=r;let c=()=>{const e=basket.querySelectorAll(".basket-item");let t=0;e.forEach((e=>{const n=e.querySelector("[data-counter]"),a=e.querySelector(".basket-item__price"),s=parseInt(n.textContent)*parseInt(a.textContent),r=document.querySelector(".discount__value"),o=document.querySelector(".total-price__value"),c=document.getElementById("basket-shipping-price");let l=0;c&&document.querySelector(".radio-input:checked")&&(l=parseInt(c.textContent)),o.innerText=(t+=s)-parseInt(r.textContent)+l+"$"}))};const l=document.querySelectorAll(".radio-input"),i=document.getElementById("basket-shipping-price"),d=()=>{const e=document.getElementById("basket-list").querySelectorAll(".basket__item"),t=Array.from(e).map((e=>e.outerHTML));localStorage.setItem("basketStorageElems",JSON.stringify(t));const n=document.getElementById("basket-total-price").innerText;localStorage.setItem("basketPrice",n)},u=document.querySelectorAll(".form-input"),m=document.querySelector(".form-btn-next"),p=document.querySelectorAll("[data-form-btn-prev]"),g=document.querySelectorAll(".road__item"),_=window.location.pathname.split("/").pop(),y=["form-information.html","form-spawn.html","form-payment.html"],b=document.querySelector(".form-btn-next"),v=document.querySelectorAll("[data-validate]"),h=document.getElementById("user-data");document.addEventListener("DOMContentLoaded",(()=>{v.forEach((e=>{e.addEventListener("input",(()=>{Array.from(v).every((e=>""!==e.value.trim()))?b.removeAttribute("disabled"):b.setAttribute("disabled",!0)}))})),h&&(()=>{const e=document.getElementById("user-data"),t=e.querySelector('[data-user="email"]'),n=e.querySelector('[data-user="address"]'),a=document.querySelector('[data-user="deliveryMethod"]'),s=localStorage.getItem("userEmail"),r=localStorage.getItem("userAddress"),o=localStorage.getItem("userDelivery");a&&(a.innerText=o),t.innerText=s,n.innerText=r})(),l&&l.forEach((e=>{e.addEventListener("change",(function(){const t=e.value;i.innerText=t;const n=this.closest(".delivery-lable"),a=`${n.querySelector(".delivery-lable__name").innerText} · ${n.querySelector(".delivery-lable__price").innerText}`;localStorage.setItem("userDelivery",a),c()}))})),(()=>{const e=y.indexOf(_);if(g.forEach((e=>{e.classList.remove("road__item-active")})),-1!==e){for(let t=0;t<e;t++)document.querySelector(`[href="${y[t]}"]`).closest(".road__item").classList.add("road__item-completed");document.querySelector(`[href="${y[e]}"]`).closest(".road__item").classList.add("road__item-active")}})(),m&&m.addEventListener("click",(e=>{e.preventDefault();const t=window.location.pathname.split("/").pop(),n=y.indexOf(t)+1;n?window.location.href=y[n]:console.error("Next page not found for:",t),(()=>{const e=document.getElementById("input-email").value,t=`${document.getElementById("input-address").value} ${document.getElementById("input-appartment").value}, ${document.getElementById("input-postcode").value} ${document.getElementById("input-city").value}, ${document.getElementById("input-country").value}`;localStorage.setItem("userEmail",e),localStorage.setItem("userAddress",t),u&&u.forEach((e=>{localStorage.setItem(e.name,e.value)}))})(),d()})),p&&p.forEach((e=>{e.addEventListener("click",(()=>{window.history.back(),d()}))})),u&&u.forEach((e=>{const t=localStorage.getItem(e.name);t&&(e.value=t)})),(()=>{const e=document.getElementById("basket-list");JSON.parse(localStorage.getItem("basketStorageElems")).map((e=>{const t=document.createElement("div");return t.innerHTML=e,t.firstChild})).forEach((t=>{e.insertAdjacentHTML("beforeend",t.outerHTML)}));const t=localStorage.getItem("basketPrice");document.getElementById("basket-total-price").innerText=t})()}));const S=()=>{const e=basket.querySelector(".basket__list"),t=basket.querySelector(".basket__empty"),n=basket.querySelector(".basket__info"),a=document.querySelector(".header-basket__counter"),s=document.querySelector(".gift");e.children.length>0?(t.classList.add("none"),n.classList.remove("none"),a&&(a.classList.remove("none"),a.innerText=e.children.length)):(t.classList.remove("none"),n.classList.add("none"),document.querySelector(".total-price__value").innerText="0$",a&&a.classList.add("none"),s&&s.classList.add("none"))};let k,f,A;document.getElementById("basket").addEventListener("click",(e=>{"plus"!==e.target.dataset.action&&"minus"!==e.target.dataset.action||(f=e.target.closest(".basket-item__actions"),k=f.querySelector("[data-counter]"),A=f.querySelector('[data-action="minus"]')),"plus"===e.target.dataset.action&&(A.innerText="-",k.innerText=++k.innerText,c(),S()),e.target.closest('[data-action="minus"]')&&(parseInt(k.innerText)>1?(k.innerText=--k.innerText,c(),1===parseInt(k.innerText)?A.innerHTML='\n            <svg class="svg-trash-alt-dims">\n              <use xlink:href="images/sprite.svg#trash-alt"></use>\n            </svg>':A.innerHTML="-"):(A.closest(".basket-item").remove(),c(),S())),e.target.closest(".basket__close-btn")&&(document.getElementById("basket").classList.remove("basket-fade-active"),document.body.style.overflow="visible"),e.target.closest(".basket__btn")&&d()}));const q=(e,t)=>{document.querySelectorAll(e).forEach((function(e,n){e.querySelectorAll('input[type="radio"]').forEach((function(e){const a=`${t}-${e.value}-${n}`;e.id=a,e.nextElementSibling.setAttribute("for",a)}))}))};q(".color__wrapper","color"),q(".size__wrapper","size");const E=e=>{const t=e.querySelector(".product-cart__color").classList;let n="";t.forEach((e=>{e.startsWith("color__")&&(n=e)}));const a=e.getAttribute("data-category"),s=e.querySelector("img").getAttribute("src"),r=e.querySelector(".product-cart__title").innerText,o=e.querySelector(".product-cart__price").innerText,l=e.querySelector(".product-cart__size").textContent,i=n,d=document.querySelector(".basket__list");let u=`\n     <li class="basket__item basket-item" data-category='${a}'>\n           \n     <img class="basket-item__img" src="${s}" alt="">\n     <div class="basket-item__info">\n       <h6 class="basket-item__title">${r}</h6>\n       <span class="basket-item__price">${o}</span>\n     </div>\n     <div class="basket-item__data">\n       <span class="basket-item__size">${l}</span>\n       <span class="basket-item__color ${i}">\n       </span>\n       <div class="basket-item__actions">\n         <div class="basket-item__control" data-action="minus">\n         <svg class="svg-trash-alt-dims">\n         <use xlink:href="images/sprite.svg#trash-alt"></use>\n       </svg>\n         </div>\n             <div class="basket-item__current" data-counter>1</div>\n             <div class="basket-item__control" data-action="plus">+</div>\n       </div>\n     </div>\n   </li>\n     `;const m=document.createElement("div");m.innerHTML=`\n      <div class="added">\n        <img class="added__img" src="${s}" alt="added">\n        <span class="added__title">\n          <svg class="svg-shopping-bag-dims">\n            <use xlink:href="images/sprite.svg#shopping-bag"></use>\n          </svg>\n          Added to cart\n        </span>\n        <div class="added__info">\n          <span class="added__name">${r}</span>\n          <span class="added__size">${l}</span>\n          <span class="added__color ${i}"></span>\n        </div>\n      </div>\n      `,document.body.appendChild(m),setTimeout((()=>{document.body.removeChild(m)}),4e3),d.insertAdjacentHTML("beforeend",u),S(),c()};document.body.addEventListener("click",(e=>{const t=e.target,n=t.closest(".product-cart");if(t.closest('[data-cart_action="edit"]')&&n.querySelector(".cart-menu").classList.add("cart-menu-open"),t.closest('[data-cart_action="add"]')){const e=n.querySelector(".product-cart__add");e.innerHTML='\n          <svg class="svg-shopping-bag_enabled-dims">\n          <use xlink:href="images/sprite.svg#shopping-bag_enabled"></use>\n      </svg>\n          ',e.setAttribute("disabled",""),t.closest(".cart-menu")&&n.querySelector(".cart-menu").classList.remove("cart-menu-open");const a=n.querySelector(".product-cart__mark-counter"),s=n.querySelector(".product-cart__mark-hit");a.classList.add("none"),s.classList.remove("none"),(e=>{let t=e.querySelector(".size__input:checked"),n=e.querySelector(".color__input:checked");const a=()=>{const t=e.querySelector(".product-cart__color"),a=n.nextElementSibling.classList[0];t.classList.remove("color__blue","color__red","color__green","color__white"),t.classList.add(a)},s=()=>{e.querySelector(".product-cart__size").textContent=t.nextElementSibling.textContent};n&&t?(a(),s()):n?a():t&&s()})(n),(e=>{const t=document.querySelector("#basket-list"),n=e.querySelector(".product-cart__color").classList;let a="";n.forEach((e=>{e.startsWith("color__")&&(a=e)}));const s=e.querySelector(".product-cart__size").textContent,r=e.getAttribute("data-category"),o=t.querySelectorAll(".basket-item");let l=!1;0!==t.children.length?(o.forEach((e=>{const t=e.querySelector(".basket-item__color").classList[1],n=e.querySelector(".basket-item__size").textContent,o=e.getAttribute("data-category");if(n===s&&o===r&&t===a){const t=e.querySelector("[data-counter]");let n=Number(t.textContent);return n++,t.textContent=n,c(),void(l=!0)}})),l||E(e)):E(e)})(n)}}));const L=document.getElementById("timer"),x=new Date;x.setMinutes(x.getMinutes()+10);L&&(e=>{let t=setInterval((()=>{const n=(e=>{const t=new Date,n=Date.parse(e)-Date.parse(t),a=Math.floor(n/1e3%60);return{total:n,minutes:Math.floor(n/1e3/60%60),seconds:a}})(e),a=n.minutes<10?`0${n.minutes}`:n.minutes,s=n.seconds<10?`0${n.seconds}`:n.seconds;L.innerHTML=`${a}:${s}`,n.total<=0&&(clearInterval(t),L.innerHTML="00:00")}),1e3)})(x),document.querySelectorAll("[data-copy-btn]").forEach((e=>{e.addEventListener("click",(function(){const e=this.closest("div").querySelector("[data-wallet]").innerText,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("Текст скопирован: "+e)}))})),o.checkWebpSupport(),o.addTouchClass(),o.addLoadedClass(),o.headerFixed()}();